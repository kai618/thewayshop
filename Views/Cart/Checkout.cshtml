@model thewayshop.Models.KhachHang
@{
  ViewBag.Title = "Checkout";
  Layout = "~/Views/Shared/_Layout.cshtml";
  var user = Model;
}



<!-- Start All Title Box -->
<div class="all-title-box">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h2>Cart</h2>
        <ul class="breadcrumb">
          <li class="breadcrumb-item">Shop</li>
          <li class="breadcrumb-item active">Checkout</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- End All Title Box -->
<!-- Cart Start -->
<br />
<br />


<section class="container" id="cart_items">
  <div class="review-payment">
    <h1><b>Review & Payment</b></h1>
  </div>
  <div id="cart_items_container" class="container" style="padding: 0"></div>
</section>

<div class="container">
  <div class="review-payment">
    <h1><b>Information</b></h1>
  </div>
  <div class="shopper-informations">
    <div class="row">
      <div class="col-sm-3">
        <div class="shopper-info">
          <p>Shopper</p>
          <form>
            <input id="shopper-name" type="text" placeholder="User Name" value="@user.TenKH" readonly="">
            <input id="shopper-add" type="text" placeholder="Address" value="@user.DiaChi" readonly="">
            <input id="shopper-phone" type="text" placeholder="Phone" value="@user.SDT" readonly="">
          </form>
        </div>
      </div>
      <div class="col-sm-5 clearfix">
        <div class="bill-to">
          <p>Recipient</p>
          <div class="form-one">
            <form>
              <input id="receiver-name" type="text" placeholder="Full Name *">
              <input id="receiver-add" type="text" placeholder="Address *">
              <input id="receiver-phone" type="text" placeholder="Phone *">
            </form>
            <label><input id="check_box1" type="checkbox"> <span style="font-weight: lighter">Ship  to my address</span></label>
          </div>
        </div>
      </div>
      <div class="col-sm-4">
        <div class="order-message">
          <p>Shipping Order</p>
          <textarea name="message" placeholder="Notes about your order, Special Notes for Delivery" rows="10"></textarea>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex justify-content-end">    
    <a href="#" class="btn btn-danger">Confirm</a>
  </div>

</div>
<br />
<br />
<!-- Cart End -->

<script type="text/javascript">
  $('#check_box1').change(function () {
    if (this.checked) {
      console.log('checked');
      $('#receiver-name').val($('#shopper-name').val())
      $('#receiver-add').val($('#shopper-add').val())
      $('#receiver-phone').val($('#shopper-phone').val())

      $('#receiver-name').prop('disabled', true);
      $('#receiver-add').prop('disabled', true);
      $('#receiver-phone').prop('disabled', true);
    } else {
      $('#receiver-name').val(null)
      $('#receiver-add').val(null)
      $('#receiver-phone').val(null)

      $('#receiver-name').prop('disabled', false);
      $('#receiver-add').prop('disabled', false);
      $('#receiver-phone').prop('disabled', false);
    }
  });

  $(document).ready(function () {
    if (productList.length == 0) {
      window.location.href = '@Url.Action("Index", "Cart")';
    }
    else {
      // begin
      rows = `
        <div class="cart_info">
          <table class="table ">
            <thead>
              <tr class="cart_menu">
                <td class="image" width="10%"></td>
                <td class="description">Item</td>
                <td class="price text-center">Price</td>
                <td class="quantity text-center">Quantity</td>
                <td class="total text-center">Total</td>
              </tr>
            </thead>
            <tbody>
      `;

      let total = 0.0;
      productList.forEach(p => {
        total += p.price * p.amount;
        rows += `
          <tr id="row-${p.id}">
          <td class="cart_product">
            <img src="${p.imageURL}" alt="">
          </td>

          <td class="cart_description">
            <h4><a href="${p.productURL}">${p.name}</a></h4>
          </td>

          <td class="cart_price text-center">
            <p>$${p.price.toFixed(2)}</p>
          </td>

          <td class="cart_quantity text-center">${p.amount}</td>

          <td class="cart_total text-center">
            <p id="cart_total_price-${p.id}"  class="cart_total_price">$${(p.price * p.amount).toFixed(2)}</p>
          </td>
        </tr>
       `;
      });

      // end
      rows += `
            </tbody>
          </table>
          <h1 class="text-right">Total: <span class="badge badge-light">$${getSum().toFixed(2)}</span></h1>
        </div>
      `;

      $("#cart_items_container").append(rows);
    }
  });
</script>

